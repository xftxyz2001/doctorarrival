# 第五章 测试

## 5.1 部署
在进行测试之前，首先需要部署整个系统环境。以下将按步骤叙述从打包、初始化到使用Docker Compose启动所有服务的过程。

### 5.1.1 环境准备与打包
确保本地环境已安装JDK 21、Node.js 20和Docker 24以上版本。
进入项目根目录，运行 `build.sh` 脚本以编译并打包后端Java应用和前端资源。

### 5.1.2 环境初始化
同样在项目根目录下，运行 `init.sh` 脚本，该脚本可能包含了设置Docker相关环境变量或其他初始化操作。

在 `~/appconfig/` 目录下的各个服务配置文件中，需要根据实际情况填充相应的配置项，例如：
- service-sms服务需要配置阿里云短信服务的endpoint、access-key-id、access-key-secret等信息。
- service-oss服务需要配置阿里云OSS的相关参数，如endpoint、access-key-id、access-key-secret以及bucket名称。
- service-order服务需配置支付宝支付网关、应用ID、私钥、公钥和站点域名等支付相关参数。

### 5.1.3 镜像构建
使用Docker Compose v1.29及以上版本，运行 `docker-compose build` 命令构建项目中所有服务的Docker镜像。

### 5.1.4 启动服务
使用 `docker-compose up -d` 命令启动所有服务容器，并以守护态模式运行。

<!--
- **基础设施服务**：
    
    - Nacos：作为注册中心和配置中心运行在8848、9848、9849端口。
    - MySQL：配置了root用户的初始密码，并挂载了初始化SQL脚本、配置文件、日志目录等卷。
    - MongoDB：设置了初始化用户名和密码，并挂载了数据、配置、备份等目录。
    - Redis：挂载了数据目录、配置文件，并开启了AOF持久化和设置了密码保护。
    - RabbitMQ：设置了默认用户和密码，并暴露了AMQP和管理端口。
- **应用服务**：
    
    - 多个微服务（如服务网关、医院服务、用户服务等）均通过Dockerfile构建镜像，并使用环境变量和卷挂载的方式注入配置信息。
    - 前端应用（如网站前端和后台管理界面）也通过Dockerfile构建镜像，并映射端口对外提供服务。
-->


## 5.2 接口测试

### 5.2.1 数据字典

### 5.2.2 医院

### 5.2.3 用户

### 5.2.4 短信

### 5.2.5 对象存储

### 5.2.6 订单

### 5.2.7 定时任务

### 5.2.8 统计分析


## 5.3 功能测试

后台管理员登录、登出
后台管理首页数据展示
数据字典展示、导入导出
医院管理增删改查，状态变更
用户管理增删改查，状态变更
文件上传、下载、删除
订单管理增删改查，状态变更
定时任务：发送就诊通知、更新订单状态
查看统计分析数据（医院、用户、订单）

前台用户登录（手机验证码、微信扫码）、登出
医院列表展示、按等级、地区、名称查询
医院科室、详情展示
科室排班信息展示
预约挂号、创建订单、支付、取消订单
查看、修改个人信息，实名认证
就诊人管理，增删改查
用户讨论区

