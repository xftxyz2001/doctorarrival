# 4 实现

## 4.1 开发环境配置
在本系统开发过程中，采用了一系列主流且稳定的技术栈，具体版本信息如下表所示：

| 技术组件 | 使用版本 |
| -------- | -------- |
| JDK      | 21.0.1   |
| Node.js  | 20.10.0  |
| Nacos    | 2.3.0    |
| MySQL    | 8.2.0    |
| MongoDB  | 6.0.12   |
| Redis    | 7.2.3    |
| RabbitMQ | 3.12     |


## 4.2 数据字典模块实现
本模块构建了一套全面的数据字典管理系统，其核心API接口囊括了数据字典的导入导出、检索和层级查询等功能：
- 数据导入接口：系统支持Excel文件格式的数据导入，方便用户批量录入或更新数据字典项。
- 数据导出接口：具备将所有字典项数据输出至Excel文件的功能，便于线下维护和备份。
- 单一查询接口：可通过ID或编码精确查找特定字典项信息。
- 子项查询接口：支持根据父级ID或编码递归获取下级字典子项。
- Map型查询接口：提供编码映射服务，快速返回对应编码的子项信息。
- 地区编码查询接口：特别定制了基于省市区编码查询地区全名的服务。


## 4.3 医院管理模块实现
本模块完整地实现了对医院信息的CRUD操作，覆盖了从新增到状态变更的所有管理功能点，其中包括但不限于：
- 创建、编辑、删除及批量删除医院设置信息；
- 针对医院的全方位查询服务，支持按名称、编码等方式检索；
- 设计了动态的医院数据统计接口，可依据不同参数实时汇总医院相关数据；
- 构建了完善的医院申请加入流程，涵盖申请提交、密钥更新以及多层面信息（医院概况、科室结构、排班安排等）的维护和批量处理；
- 同步实现了与订单功能的深度集成，支持用户提交订单、跟踪订单状态、查询订单详情，以及获取医院科室和排班信息等。


## 4.4 用户模块实现
用户模块承载了用户账户生命周期的全程管理，主要包括：
- 基于增删改查（CRUD）的操作，可完成用户的注册、注销、批量管理及状态变更；
- 支持用户登录验证、实名认证流程，允许用户自主更新联系方式（如手机号码、昵称等）；
- 集成了微信扫码登录功能，实现二维码生成、登录回调处理等环节的安全便捷接入；
- 管理并维护用户与其关联的就诊人信息，提供就诊人添加、删除、查询及信息更新服务。


## 4.5 短信服务模块
本模块专注于短信通信服务，具体功能有：
- 提供验证码短信发送接口，可迅速向目标手机号码发送验证码，并实时反馈发送结果；
- 配合定时任务系统，执行诸如就诊提醒通知等自动化短信发送任务，确保用户及时接收到关键信息。


## 4.6 对象存储模块实现
为了高效管理和访问用户上传的文件资源，设计了丰富易用的对象存储服务接口，包括：
- 获取管理路径、上传单个或多个文件；
- 下载单个或批量文件；
- 删除单个或批量文件记录；
- 列出文件目录和详细信息；
- 专为用户场景优化，提供文件上传接口和安全预览服务。


## 4.7 订单管理模块实现
订单模块实现了全面而细致的订单资源管理功能，既满足后台管理需求，又兼顾用户端操作权限：
- 创建订单：经由管理员或已验证用户，使用POST方式提交订单信息创建新订单；
- 删除订单：支持按单个订单ID或者批量删除多个订单；
- 更新订单：全面支持订单信息的更新操作，同时允许单独调整订单状态；
- 查询订单：提供按ID查询详细订单信息、条件过滤查询（包含分页功能），以及用户个人订单列表查询；
- 订单状态变更：通过专门的状态更新接口，使得订单流转过程清晰可控；
- 下单流程：用户借助安全的身份验证机制发起下单请求，系统自动生成新订单；
- 订单详情获取：用户能够通过授权获取自己订单的详细信息；
- 支付相关接口：包括获取支付页面链接、查询交易状态、关闭交易、发起退款及查询退款状态等一系列支付流程辅助功能；
- 与第三方支付平台（例如支付宝）无缝对接，确保订单支付流程的安全与完整性。


## 4.8 定时任务模块实现
该模块支持人工触发或自动执行一系列关键任务，如：
- 手动触发发送就诊提醒通知的任务，保障患者按时就诊；
- 自动化更新订单状态任务，遵循业务逻辑规则，精准调控订单进展。


## 4.9 统计分析模块实现
为了深入洞察系统运行状况，统计分析模块提供了针对医院、用户及订单的多样统计分析接口：
- 接受自定义参数输入，灵活生成不同维度的统计数据报告；
- 助力运营决策，通过数据分析反映系统各项核心指标表现。
