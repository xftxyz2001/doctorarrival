
\chapter{这是一章}
\section{介绍}
\subsection{简介}
本模板用于西北大学本科毕业设计论文的\LaTeX 排版，排版按照西北大学毕业论文格式规范，在Windows环境下使用。
双面打印，页眉页脚、目录、各级标题、页码、参考文献、正文格式均已设好，包含了论文的基本部分，可以直接使用，适合各理工学科同学的本科毕业论文排版。
本模板由hkkhhk制作，Email:\texttt{hkkhhk1@126.com}。

\subsection{使用环境}

软件环境：
\begin{itemize}
    \item [操作系统] Windows 系列操作系统 (推荐XP)\footnote{没在Linux下测试，不知道能不能用}；
    \item [PDF浏览器] Adobe Reader (推荐6以上版本)；
    \item [\LaTeX\ IDE] CTEX (推荐2.6.5以上版本)；
    \item [EPS 格式转换] All2EPS，压缩包里有带；
    \item [DOC 浏览器] Microsoft Office (推荐2007以上版本，可以直接转换为PDF)；
\end{itemize}

\subsection{\LaTeX 学习(中文)}

\begin{itemize}
    \item [基础入门] lnotes(Alpha Huang)、lshorts(Tobias Oetiker)；
    \item [系统全面] \LaTeX$2\varepsilon$科技排版指南 (邓建松等)；
    \item [深入进阶] TeXbook0(xianxian)。
    \item [FAQ] \url{http://bbs.ctex.org}。
\end{itemize}

\subsection{模板使用}
本模板只有1章和1个附录，需要增加的参考第一章的方式建立新文件，并去掉\texttt{main.tex}相应注释。

插入EPS图片：
使用All2EPS把各种位图转化为EPS格式，如果是矢量图建议直接存为EPS格式。

插入封面：
把学校提供的DOC封面转为PDF格式，用GSView打开该PDF，菜单"File-"Convert"转为EPS格式，
Device选择"epswrite"，Resolution选择"300"，见图\ref{fig:title}然后保存在titlepage子目录下的\texttt{titlepage.eps}。
而诚信申明已经做好，打印好签名就行。

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=8cm]{pic/title}
    \caption{插入封面-用GSViewer转化PDF封面\label{fig:title}}
\end{figure}

参考文献先修改\texttt{main.bib}的条目，从\texttt{scholar.google.com}中可快速搜索到题录，见图\ref{fig:google}(需要设置"学术搜索设置"，
让其显示导入\BibTeX 连接)，将其贴入\texttt{main.bib}，并修改引用的标签，需要引用的地方用\verb|\cite{标签}|来加入引用\footnote{参考\ref{sec:bib}}，格式为GBT-7714-2005标准。

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{pic/Einstein}
    \caption{Google Scholar查找题录\label{fig:google}}
\end{figure}


生成PDF输出文件：
本模板使用\LaTeX 编译生成DVI，再经DviPdfmx转换为PDF，只要运行\texttt{makefile.bat}即可，也可按照\LaTeX -\BibTeX -\LaTeX -\LaTeX -\texttt{DviPdfmx}的手动顺序进行。

\section{测试开始}
\subsection{测试数学环境和\BibTeX}
\label{sec:bib}
复变函数欧拉公式为，对于任意实数$x$，存在:
$$e^{ix} = \cos x + i\;\sin x$$
当$x = \pi$时，欧拉公式的特殊形式为\ref{eq:euler}。
\begin{equation}
\label{eq:euler}
e ^ {ix} + 1 = 0
\end{equation}

\citeauthor{einstein1935}于\citeyear{einstein1935}年提出了质能方程：
\[ e=mc^2 \cite{einstein1935} \]


\subsection{测试itemize和enumerate环境}
\begin{multicols}{2}
\begin{itemize}
    \item C/C++；
    \item Java；
    \item Python；
    \item Basic；
    \item Ruby；
    \item Assembly；
    \item VB.net \/ ASP.net \/ C\#.net；
    \item Galaxy\footnote{精通各种编程语言}。
\end{itemize}
\end{multicols}

\begin{enumerate}
    \item London English;
    \item Chinglish;
    \item South African English;
    \item American English\footnote{精通各国英语};
\end{enumerate}

\subsection{测试表格环境和双重标题}
下面测试表格和中英文双重标题，如表\ref{tab:method}所示：

\begin{table}[!htbp]
\small \bicaption[tab:method]{}{中文标题}{Table}{English Title}
\centering
\begin{tabularx}{15cm}{lXXXXXXX}
\toprule
0 & 1 & 2 &  3 & 4 & 5 & 6 & 7\\
\midrule
0 & 1 & 2 &  3 & 4 & 5 & 6 & 7\\
0 & 1 & 2 &  3 & 4 & 5 & 6 & 7\\
\bottomrule
\end{tabularx}
\end{table}

而表\ref{tab:primer2}是跨页长表格，使用longtable宏包，无双重caption：
\begin{longtable}{ccccccccccc}
\caption{测试长表格\label{tab:primer2}}\\
\toprule
ID & P3A & P3B & P7A & P7B & P9A & P9B & P14A & P14B & P15A & P15B\\
\midrule
\endfirsthead
\midrule
ID & P3A & P3B & P7A & P7B & P9A & P9B & P14A & P14B & P15A & P15B\\
\midrule
\endhead
\midrule
\multicolumn{11}{r}{接下页\dots} \\
\endfoot
\bottomrule
\endlastfoot
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
LG01 &   H4 &   H4 &   H5 &   H3 &   H4 &   H4 &   H5 &   H3 &   H5 &   H5 \\
\end{longtable}

\subsection{测试插图和横向环境}
Heightway Dragon曲线，见图\ref{fig:P9}。$f(x,y) = 1 - \big(1 - e^{-ax}\big)^y$的曲面见图\ref{fig:P92}。
\begin{figure}[!htbp]
    \centering
    \includegraphics[width=14cm]{pic/agarose}
    \bicaption[fig:P9]{}{龙曲线}{Figure}{Heightway Dragon}
\end{figure}

\begin{landscape}
\begin{figure}[!htbp]
    \centering
    \includegraphics[width=16cm]{pic/grid1}
    \caption{$f(x,y) = 1 - \big(1 - e^{-ax}\big)^y$\label{fig:P92}}
\end{figure}
\end{landscape}

\subsection{测试化学符号}
有机化学符号使用xymtex宏包插入，具体查看说明，在C\TeX 安装目录\\ \verb|\texmf\doc\latex\xymtex|。
也能用ChemOffice保存成eps格式用插图方式插入，如图\ref{fig:amino}。

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=4cm]{pic/amino_acid}
    \caption{氨基酸\label{fig:amino}}
\end{figure}

\begin{center}
    \cyclohexanev{1Sd==1Sd;1Su==1Su;2Sd==2Sd;2Su==2Su;3Sd==3Sd;3Su==3Su;4Sd==4Sd;4Su==4Su;5Sd==5Sd;5Su==5Su;6Sd==6Sd;6Su==6Su}\quad\quad\quad\quad
    \cyclohexanev{1FA==1FA;1GB==1GB;3FA==3FA;3GB==3GB;5FA==5FA;5GB==5GB}\quad\quad
    \bzdrh{1==Cl;4==\kern-25pt\lower37pt\hbox to0pt{\bzdrh{3==F}\hss}}\\

    \cyclopropanehi{2Sa==COOCH$_{3}$;2Sb==COOCH$_{3}$}\quad\quad\quad\quad\quad
    \Ethyleneh{1==C;2==C}{1==F;2==Cl;4==Br;3==\Ethyleneh{1==C;2==C}{1==(yl);2==H;3==H;4==H}}
\end{center}


\subsection{测试插入程序源代码}
计算机程序源代码使用listings宏包插入，程序框图用EPS插入。C的：

\lstset{language=C}
\begin{lstlisting}[frame=single,firstnumber=1]
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <math.h>

#define TRUE 1
#define FALSE 0
#define PI 3.1415926535898
typedef unsigned long BOOL;
typedef signed long INT32;
typedef unsigned long UINT32;
typedef double DOUBLE;
typedef char CHAR, *PCHAR;
typedef struct _group{
    INT32 x;/*mm*/
    INT32 n;
}Group, *PGroup;

BOOL exp1(INT32 dis, INT32 n);
BOOL exp2(INT32 dis, INT32 n);
BOOL exp3(INT32 dis, INT32 n);
UINT32 rand32(UINT32);
DOUBLE rand1(void);
DOUBLE normrnd(DOUBLE mean, DOUBLE std);
void main(void){
    BOOL (*EXP[3])(INT32 dis, INT32 n);
    INT32 L = 100;/*100km*/
    INT32 W = 20;/*20km*/
    DOUBLE D = 100;/*Density*/
    DOUBLE Rmax = 2500;
    INT32 N = D * L * W;
    INT32 N2 = N;
    INT32 i, j;
    DOUBLE dis;
    PGroup animals, animals2;
    FILE *f[6];
    CHAR filehead[250] = "事件记录格式0.1.2,,,,,,,,,\n区域面积（公顷）,%ld,,,,,,,,\n样线号,长度(km),走向,起点经度,起点纬度,终点经度,终点纬度,备注,,\nLB-001,%ld,东西,,,,,,,\n,,,,,,,,,\n,,,,,,,,,\n#结束标志,,,,,,,,,\n样线号,动物种类,数量,到样线距离(m),时间,经度,纬度,夹角,测距,备注\n";
    PCHAR strbuffer = (PCHAR)malloc(10000);
    animals = (PGroup)malloc(N * sizeof(Group));
    animals2 = (PGroup)malloc(N * sizeof(Group));
    EXP[0] = &exp1, EXP[1] = &exp2, EXP[2] = &exp3;
    srand((UINT32)time(NULL));
    for(i = 0; i < 6; ++i)  {
        sprintf(strbuffer, "d:\\bioline%d.csv", i + 1);
        f[i] = fopen(strbuffer,"w");
        fprintf(f[i], filehead, L * W * 100, L);
    }
    /*generate groups*/
    for(i = 0; i < N; ++i) {
        animals[i].x = rand32(W);
        animals[i].n = 1;
    }
    for(i = 0; i < N2; ++i) {
        animals2[i].x = rand32(W);
        animals2[i].n = normrnd(15, 5) + 0.5;
        N2 -= animals2[i].n - 1;
    }

    /*generate line data*/
    for(i = 0; i < N; ++i)  {
        dis = abs(W * 50000 - animals[i].x) / 100; /*m*/
        for(j = 0; j < 3; ++j) if((*EXP[j])(dis, animals[i].n)) fprintf(f[j],"L1,A,%d,%0.2lf,,,,,,\n", animals[i].n, dis);
    }
    for(i = 0; i < N2; ++i) {
        dis = abs(W * 50000 - animals2[i].x) / 100; /*m*/
        for(j = 0; j < 3; ++j) if((*EXP[j])(dis, animals2[i].n)) fprintf(f[j + 3],"L1,A,%d,%0.2lf,,,,,,\n", animals2[i].n, dis);
    }
    for(i = 0; i < 6; ++i)
        fprintf(f[i],"#结束标志");
    free(animals);
    free(animals2);
    fcloseall();
}

BOOL exp1(INT32 dis, INT32 n) {
    if(rand1() < 1.0 - pow(1.0 - exp(dis / -500.0), n)) return TRUE;
    return FALSE;
}

BOOL exp2(INT32 dis, INT32 n) {
    if(rand1() <  1.0 - pow(1.0 - exp( dis * dis / -720000.0), n)) return TRUE;
    return FALSE;
}

BOOL exp3(INT32 dis, INT32 n) {
    DOUBLE Rm = 2000;
    DOUBLE k = -240;
    if(dis>Rm) return FALSE;
    if(rand1() < 1.0 - pow(exp(k / dis * atan( sqrt(Rm * Rm - dis * dis) / dis)), n)) return TRUE;
    return FALSE;
}

UINT32 rand32(UINT32 n){
    return ( (rand() << 17) + (rand() << 2) + rand() % 4) % (n * 100000);
}

DOUBLE rand1(void){
    return rand() * 1.0 / 0x8000;
}

DOUBLE normrnd(DOUBLE mean, DOUBLE std){
    DOUBLE norm = 1.0 / 0x8000;
    DOUBLE u = 1.0 - rand() * norm;
    DOUBLE v = rand() * norm;
    DOUBLE z = sqrt(-2.0 * log(u)) * cos(2.0 * PI * v);
    if( mean < 0 ) return 0;
    if( mean + std * z > 0 ) return mean + std * z;
    else return normrnd(mean, std);
}
\end{lstlisting}

Matlab的：
\lstset{language=Matlab}
\begin{lstlisting}[frame=single,firstnumber=1]
clear;
D = 100; L0 = 100; W0 = 20; k = -240; Rm = 2000; N = D * L0 * W0;
animalnum = zeros(0);
animals = rand(N, 1) * 100000 * W0; %Generate distance data
animalnum1 = round(normrnd(15, 5, [1, N]));
i = 0; j = 1;
while(i < N)
    if(animalnum1(j) > 0)
        i = i + animalnum1(j);
        animalnum = [animalnum, animalnum1(j)];
    end
    j = j + 1;
end
% individual
a3 = zeros(0), a1 = a3, a2 = a3;
for i = 1 : length(animals)
   dis = abs (animals(i) -  50000 * W0 ) / 100;
   if(rand() < exp(- dis / 500))
       a1 = [a1, dis];
   end
   if(rand() < exp(- dis * dis / 720000))
       a2 = [a2, dis];
   end
   if(dis <= Rm && rand() < 1 - exp(k / dis * atan(sqrt(Rm * Rm - ...
           dis * dis) / dis)))
       a3 = [a3, dis];
   end
end
W = zeros(1,3), D = W;
for ii=1:3
    eval(sprintf('a=a%d;', ii));
    sec = floor(max(a))/(length(a)/50);
    x = [0 : sec : ceil(max(a) / sec) * sec];
    y = zeros(1, length(x));
    for i = 1 : length(a)
        t = floor(a(i) / sec) + 1;
        y(t) = y(t) + 1;
    end
    x = x + (sec / 2);
    P = POLYFIT(x, y, 5);
    yy = polyval(P, x);
    y = y ./ max(yy);
    yy = yy ./ max(yy);
    P = POLYFIT(x, y, 5);
    if(ii==1)
        plot(x, y, 'r.', x, yy, 'r')
    elseif(ii==2)
        plot(x, y, 'g.', x, yy, 'g')
    elseif(ii==3)
        plot(x, y, 'b.', x, yy, 'b')
    end
    hold on, xlabel 'd', ylabel 'p'
    legend('Original','Polyfit')
    axis([0, max(x) + sec / 2, 0 ,1.1])
    str = sprintf('(%d*x.^5)+(%d*x.^4)+(%d*x.^3)+(%d*x.^2)+(%d*x)+ (%d)', ...
        P(1), P(2), P(3), P(4), P(5), P(6));
    f = inline(str, 'x');
    W(ii) = quad(f, 0, max(x));
    D(ii) = length(a) / (2 * L0 * W(ii) / 1000);
end

pause
%group
a3 = zeros(0); a1 = a3; a2 = a3; b1 = a3; b2 = a3; b3 = a3;
animals = animals(1: length(animalnum));
for i = 1 : length(animals)
   dis = abs (animals(i) - 50000 * W0 ) / 100;
   if(rand() < (1 - (1 - exp( dis / -500)) ^ animalnum(i)))
       a1 = [a1, dis];
       b1 = [b1, animalnum(i)];
   end
   if(rand() < (1 - (1 - exp( dis * dis / -720000)) ^ animalnum(i)))
       a2 = [a2, dis];
       b2 = [b2, animalnum(i)];
   end
   if(dis <= Rm && rand() < (1 - (exp(k / dis * atan(sqrt(Rm * Rm - ...
           dis * dis) / dis))) ^ animalnum(i)))
       a3 = [a3, dis];
       b3 = [b3, animalnum(i)];
   end
end
W2 = zeros(1,3); D2 = W2;
for ii=1:3
    eval(sprintf('a=a%d;b=b%d;', ii,ii));
    sec = floor(max(a))/(length(a)/50);
    x = [0 : sec : ceil(max(a) / sec) * sec];
    y = zeros(1, length(x));
    for i = 1 : length(a)
        t = floor(a(i) / sec) + 1;
        y(t) = y(t) + b(i);
    end

    x = x + (sec / 2);
    P = POLYFIT(x, y, 5);
    yy = polyval(P, x);
    y = y ./ max(yy);
    yy = yy ./ max(yy);
    P = POLYFIT(x, y, 5);
    if(ii==1)
        plot(x, y, 'r.', x, yy, 'r')
    elseif(ii==2)
        plot(x, y, 'g.', x, yy, 'g')
    elseif(ii==3)
        plot(x, y, 'b.', x, yy, 'b')
    end
    hold on, xlabel 'd', ylabel 'p'
    legend('Original','Polyfit')
    axis([0, max(x) + sec / 2, 0 ,1.1])
    str = sprintf('(%d*x.^5)+(%d*x.^4)+(%d*x.^3)+(%d*x.^2)+(%d*x)+ (%d)', ...
        P(1), P(2), P(3), P(4), P(5), P(6));
    f = inline(str, 'x');
    W2(ii) = quad(f, 0, max(x));
    eval(sprintf('D2(ii) = mean(b%d) * length(a) / (2 * L0 * W2(ii) / 1000);', ii, ii));
end
clc
W, D, W2, D2
\end{lstlisting}
