\documentclass[CJK,cs4size,a4paper,openright]{ctexbook}

\usepackage[top=2.5cm,bottom=2.5cm,left=4cm,right=2cm]{geometry}%页边距

\usepackage{amsmath} %数学公式
\usepackage{cases}
\usepackage{multicol,balance}
\usepackage{longtable} %长表格
\usepackage{tabularx}  %换行表格
\usepackage[final]{graphicx} %图片
\usepackage{texshade} %图片
\usepackage{titletoc} %目录样式
\usepackage{ccaption} %中英文题注
\usepackage{lscape}
\usepackage{xymtex}%化学
\usepackage[super,square,sort&compress]{natbib} %参数代表：上标，方括号，数字，排序与压缩
\bibliographystyle{require/GBT7714-2005NLang} %参考文献格式设为GBT7714-2005N.bst
%参考文献的上标形式

\usepackage[CJKbookmarks=true,%PDF的颜色和超链接宏包，打印时建议去掉，因为超链接会加上边框、颜色
            bookmarksnumbered=true,
            bookmarksopen=true, %Collapse all bookmarks at pdf start view
            pdfauthor=hkkhhk,
            pdfcreator={LaTex with hyperref package + WinEdt},
            %pdftitle=,
            %colorlinks,%
            linkcolor=black,%
            hyperindex,%
            plainpages=false,%
            pdfstartview=FitH,
            linktocpage=true,
            dvipdfm%
            ]{hyperref}
%参考文献跳转，此宏包会自动载入graphicx
\usepackage{textcomp} %摄氏度符号

\usepackage{require/myfont} %字体
\usepackage{color} %gnuplot彩色文字
    %\usepackage{overpic} %图上标记
    %\usepackage{ccmap} %pdf中文复制, latex编译不需要此红包
    %\usepackage{texshade} %texshade，此宏包与graphicx冲突，故放最后
\usepackage{booktabs}%三线表
\usepackage{fancyhdr}%页眉页脚叶边
    \pagestyle{fancy}

    \fancyhf{}%普通样式
    \fancyhead[C]{\mytitle}
    \fancyfoot[C]{\CJKfamily{hei}\thepage}
    \fancypagestyle{plain}
    {
        \fancyhead[C]{\mytitle}
        \fancyfoot[C]{\CJKfamily{hei}\thepage}
    }

\renewcommand{\headrulewidth}{.5pt}%页眉的横线宽度

\usepackage{listings}%计算机程序源代码显示宏包
    \xdefinecolor{ugreen}{rgb}{0,0.5,0}%定义一种注释用的绿色
    \lstset{language=C++}%这条命令可以让LaTeX排版时将C++键字突出显示
    \lstset{breaklines}%这条命令可以让LaTeX自动将长的代码行换行排版
    \lstset{extendedchars=false}%这一条命令可以解决代码跨页时，章节标题，页眉等汉字不显示的问题
    \lstset{numbers=left, numberstyle=\tiny, basicstyle=\footnotesize, stepnumber=5, numbersep=5pt}%给程序标上行好
    \lstset{keywordstyle=\color{blue}\bfseries}%关键字变蓝加粗
    \lstset{commentstyle=\color{ugreen}\itshape}%注释变绿斜体


\makeatletter
    \renewcommand\subsubsection{\@startsection {subsubsection}{3}{\z@}%
    {1ex \@plus -1ex \@minus -.1ex}%
    {0.5ex \@plus.1ex}%
    {\normalfont\zihao{-4}\CJKfamily{hei}}}
\makeatother

\makeatletter
    \newcommand{\allmodesymb}[2]{\relax\ifmmode{\mathchoice
    {\mbox{\fontsize{\tf@size}{\tf@size}#1{#2}}}
    {\mbox{\fontsize{\tf@size}{\tf@size}#1{#2}}}
    {\mbox{\fontsize{\sf@size}{\sf@size}#1{#2}}}
    {\mbox{\fontsize{\ssf@size}{\ssf@size}#1{#2}}}} \else
    \mbox{#1{#2}}\fi}
\makeatother


%章节、目录样式
\renewcommand{\chaptermark}[1]{\markboth{第 \thechapter\ 章\quad #1}{}}
\CTEXsetup[nameformat+={\bfseries\zihao{-3}}]{chapter}%一级标题小三黑体
\CTEXsetup[titleformat+={\bfseries\zihao{-3}}]{chapter}
\CTEXsetup[number={\chinese{chapter}}]{chapter}
\CTEXsetup[name={第~,~章}]{chapter}
\CTEXsetup[format={\bfseries\zihao{4}}]{section}%二级标题四号黑体
\CTEXsetup[format={\bfseries\zihao{-4}}]{subsection}%三级标题小四号黑体
\CTEXsetup[format={\bfseries\zihao{-4}}]{subsubsection}%四级标题小四号黑体
\CTEXsetup[format={\bfseries\zihao{-4}}]{paragraph}
%\CTEXsetup[beforeskip={0em}]{paragraph}
\CTEXsetup[beforeskip={0pt}]{chapter}%章的前后行距
\CTEXsetup[afterskip={2em}]{chapter}
%\CTEXsetup[afterskip={0pt}]{subsection}
%\CTEXsetup[afterskip={0pt}]{subsection}
\CTEXsetup[afterskip={0pt}]{subsubsection}
%\captionwidth{0.8\textwidth}
%\changecaptionwidth
\CTEXoptions[contentsname={\bfseries\zihao{-2}目\quad 录}]

\titlecontents{chapter}[0pt]{\zihao{4}\bfseries\addvspace{.6pc}}%
          {\thecontentslabel\enspace}%
              {}{\hfill\contentspage}[\addvspace{.4pc}]

\renewcommand{\textfraction}{0.15}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.65}
\renewcommand{\floatpagefraction}{0.60}

\setlength{\belowcaptionskip}{3pt plus1pt minus2pt}

%enum间距
\makeatletter
\def\enumerate{%
 \ifnum \@enumdepth >\thr@@\@toodeep\else
   \advance\@enumdepth\@ne
   \edef\@enumctr{enum\romannumeral\the\@enumdepth}%
     \expandafter
     \list
       \csname label\@enumctr\endcsname
       {\usecounter\@enumctr\def\makelabel##1{\hss\llap{##1}}%
         \addtolength{\leftmargin}{10pt}\addtolength{\parsep}{10pt}\addtolength{\rightmargin}{20pt} %%%%
         \addtolength{\listparindent}{50pt} %%%%
         \addtolength{\itemsep}{-14pt} %%%%
         \addtolength{\topsep}{0pt}} %%%%
 \fi}
\makeatother

%item间距
\makeatletter
\def\itemize{%
 \ifnum \@itemdepth >\thr@@\@toodeep\else
   \advance\@itemdepth\@ne
   \edef\@itemitem{labelitem\romannumeral\the\@itemdepth}%
   \expandafter
   \list
     \csname\@itemitem\endcsname
     {\def\makelabel##1{\hss\llap{##1}}%
         \addtolength{\leftmargin}{10pt}\addtolength{\parsep}{10pt}\addtolength{\rightmargin}{20pt} %%%%
         \addtolength{\listparindent}{50pt} %%%%
         \addtolength{\itemsep}{-14pt} %%%%
         \addtolength{\topsep}{0pt}}%
 \fi}
\makeatother






%单位设置
\newcommand{\ul}{$\umu$L }%微升
\newcommand{\mm}{mmol$\cdot\text{L}^{-1}$ }%微摩尔
\newcommand{\mol}{mol$\cdot\text{L}^{-1}$ }%摩尔
\newcommand{\um}{$\umu$mol$\cdot\text{L}^{-1}$ }%微米
\newcommand{\du}{\textcelsius }%度
\newcommand{\BibTeX}{\textsc{Bib}\TeX}

\newcommand{\greeksym}[1]{\usefont{U}{psy}{m}{n}#1}
\newcommand{\ualpha}{\allmodesymb{\greeksym}{a}}
\newcommand{\ubeta}{\allmodesymb{\greeksym}{b}}
\newcommand{\uchi}{\allmodesymb{\greeksym}{c}}
\newcommand{\udelta}{\allmodesymb{\greeksym}{d}}
\newcommand{\ugamma}{\allmodesymb{\greeksym}{g}}
\newcommand{\umu}{\allmodesymb{\greeksym}{m}}
\newcommand{\unu}{\allmodesymb{\greeksym}{n}}
\newcommand{\upi}{\allmodesymb{\greeksym}{p}}
\newcommand{\utau}{\allmodesymb{\greeksym}{t}}


%空白页
\newcommand{\clearclear}{
    \newpage
        \hbox{}
        \vspace*{\fill}
        \begin{center}
        \end{center}
        \vspace{\fill}
        \thispagestyle{empty}
    \newpage
}



%空白页2
\makeatletter
\def\cleardoublepage
{
    \clearpage
    \if@twoside
        \ifodd
            \c@page
        \else
            \hbox{}
            \vspace*{\fill}
            \begin{center}
            \end{center}
            \vspace*{\fill}
            \thispagestyle{empty}
            \newpage
            \if@twocolumn
                \hbox{}\newpage
            \fi
        \fi
    \fi
}
\makeatother



\newcommand{\mytitle}{中文标题}%定义中文标题
\begin{document}
\frontmatter    %正文前页码用小写罗马数字
\include{chapter/titlepage}
\pagestyle{fancy}
\setcounter{page}{1}%页码重新编号
\include{chapter/abstract}

\tableofcontents

\mainmatter%正文用页码阿拉伯数字
\include{chapter/chapter1}
%\include{chapter/chapter2}
\addcontentsline{toc}{chapter}{参考文献}

%\backmatter正文后页码用大写罗马数字
\bibliography{main}
\clearclear
\include{chapter/acknowledge}%致谢
\clearclear
\appendix%开始附录
\include{chapter/appendix1}
%\include{chapter/appendix2}
\end{document}
